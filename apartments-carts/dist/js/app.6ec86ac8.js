(function(t){function e(e){for(var a,r,o=e[0],s=e[1],d=e[2],l=0,b=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&b.push(n[r][0]),n[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);u&&u(e);while(b.length)b.shift()();return i.push.apply(i,d||[]),c()}function c(){for(var t,e=0;e<i.length;e++){for(var c=i[e],a=!0,o=1;o<c.length;o++){var s=c[o];0!==n[s]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=c[0]))}return t}var a={},n={app:0},i=[];function r(e){if(a[e])return a[e].exports;var c=a[e]={i:e,l:!1,exports:{}};return t[e].call(c.exports,c,c.exports,r),c.l=!0,c.exports}r.m=t,r.c=a,r.d=function(t,e,c){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:c})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var c=Object.create(null);if(r.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(c,a,function(e){return t[e]}.bind(null,a));return c},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var u=s;i.push([0,"chunk-vendors"]),c()})({0:function(t,e,c){t.exports=c("56d7")},"0ec1":function(t,e,c){},"1ccc":function(t,e,c){},"1f04":function(t,e,c){"use strict";c("1ccc")},"243b":function(t,e,c){t.exports=c.p+"img/apartment.07711896.jpg"},2736:function(t,e,c){"use strict";c("0ec1")},"2e06":function(t,e,c){"use strict";c("f6a8")},"56d7":function(t,e,c){"use strict";c.r(e);c("e260"),c("e6cf"),c("cca6"),c("a79d");var a=c("7a23"),n={class:"container"},i=Object(a["f"])("h1",{class:"title"},"Каталог",-1),r={class:"catalog"};function o(t,e,c,o,s,d){var u=Object(a["m"])("baseLoader"),l=Object(a["m"])("baseErrorLoad"),b=Object(a["m"])("productList");return Object(a["h"])(),Object(a["c"])("main",n,[i,Object(a["f"])("section",r,[d.productsLoading?(Object(a["h"])(),Object(a["c"])(u,{key:0,text:"Секунду, загружаем апартаменты..."})):Object(a["d"])("",!0),d.productsLoadingFailed?(Object(a["h"])(),Object(a["c"])(l,{key:1,onLoadSmth:this.loadProducts},null,8,["onLoadSmth"])):Object(a["d"])("",!0),Object(a["f"])(b,{products:d.products},null,8,["products"])])])}var s={class:"catalog__list"};function d(t,e,c,n,i,r){var o=Object(a["m"])("productItem");return Object(a["h"])(),Object(a["c"])("ul",s,[(Object(a["h"])(!0),Object(a["c"])(a["a"],null,Object(a["l"])(c.products,(function(t){return Object(a["h"])(),Object(a["c"])(o,{key:t.id,product:t},null,8,["product"])})),128))])}var u={class:"catalog__item"},l={class:"catalog__title"},b={href:"#",class:"catalog__title-link"},p={class:"catalog__price"};function v(t,e,n,i,r,o){var s=Object(a["m"])("baseLike");return Object(a["h"])(),Object(a["c"])("li",u,[Object(a["f"])("img",{src:c("bb6e")("./".concat(n.product.image)),alt:"Название товара",class:"catalog__item-img"},null,8,["src"]),Object(a["f"])("h3",l,[Object(a["f"])("a",b,Object(a["n"])(n.product.title),1)]),Object(a["f"])("span",p,Object(a["n"])(o.formattedPrice)+" ₽ ",1),Object(a["f"])(s,{likeCount:o.likeCount,"onUpdate:likeCount":e[1]||(e[1]=function(t){return o.likeCount=t})},null,8,["likeCount"])])}var f=Object(a["f"])("span",{class:"heart-btn__heart"},null,-1),O=Object(a["f"])("span",{class:"heart-btn__text"},"Like",-1),h={class:"heart-btn__numb"};function j(t,e,c,n,i,r){return Object(a["h"])(),Object(a["c"])("button",{class:"heart-btn",onClick:e[1]||(e[1]=Object(a["p"])((function(){return r.addLike&&r.addLike.apply(r,arguments)}),["prevent"]))},[Object(a["f"])("div",{class:["heart-btn__content",{active:i.isLikeActive}]},[f,O,Object(a["f"])("span",h,Object(a["n"])(r.baseLikeCount),1)],2)])}c("a9e3");var m={data:function(){return{isLikeActive:!1}},props:{likeCount:Number},emits:["update:likeCount"],computed:{baseLikeCount:{get:function(){return this.likeCount},set:function(t){this.$emit("update:likeCount",t)}}},methods:{addLike:function(){var t=this;this.isLikeActive=!0,this.baseLikeCount+=1,setTimeout((function(){t.isLikeActive=!1}),300)}}};c("9721");m.render=j;var g=m,k={props:{product:Object},components:{baseLike:g},computed:{likeCount:{get:function(){return this.product.likeCount},set:function(t){this.$store.dispatch("addLike",{productId:this.product.id,likeCount:t})}},formattedPrice:function(){return(new Intl.NumberFormat).format(this.product.price)}},methods:{addLike:function(t){this.$store.dispatch("updateLikeCount",{productId:this.product.id,likeCount:t})}}};c("8d2f");k.render=v;var L=k,_={components:{productItem:L},props:{products:Array}};c("7c76");_.render=d;var y=_,C=Object(a["q"])("data-v-1563c7ea");Object(a["j"])("data-v-1563c7ea");var x={class:"loader"},w={class:"container"},I={class:"loader_text"},P=Object(a["e"])('<div class="bubbles" data-v-1563c7ea><div class="bubble" data-v-1563c7ea><div class="circle" data-v-1563c7ea></div></div><div class="bubble" data-v-1563c7ea><div class="circle" data-v-1563c7ea></div></div><div class="bubble" data-v-1563c7ea><div class="circle" data-v-1563c7ea></div></div><div class="bubble" data-v-1563c7ea><div class="circle" data-v-1563c7ea></div></div><div class="bubble" data-v-1563c7ea><div class="circle" data-v-1563c7ea></div></div><div class="bubble" data-v-1563c7ea><div class="circle" data-v-1563c7ea></div></div><div class="bubble" data-v-1563c7ea><div class="circle" data-v-1563c7ea></div></div><div class="bubble" data-v-1563c7ea><div class="circle" data-v-1563c7ea></div></div><div class="bubble" data-v-1563c7ea><div class="circle" data-v-1563c7ea></div></div><div class="bubble" data-v-1563c7ea><div class="circle" data-v-1563c7ea></div></div><div class="bubble" data-v-1563c7ea><div class="circle" data-v-1563c7ea></div></div></div>',1);Object(a["i"])();var S=C((function(t,e,c,n,i,r){return Object(a["h"])(),Object(a["c"])("div",x,[Object(a["f"])("div",w,[Object(a["f"])("p",I,Object(a["n"])(c.text),1),P])])})),A={props:{text:String}};c("2736");A.render=S,A.__scopeId="data-v-1563c7ea";var E=A,$=Object(a["q"])("data-v-a82d7cd4");Object(a["j"])("data-v-a82d7cd4");var M={class:"error-loader"},F=Object(a["f"])("p",{class:"error-loader__text"},"Произошла ошибка при загрузке",-1);Object(a["i"])();var N=$((function(t,e,c,n,i,r){return Object(a["h"])(),Object(a["c"])("div",M,[F,Object(a["f"])("button",{class:"error-loader__button",onClick:e[1]||(e[1]=function(e){return t.$emit("loadSmth")})},"Попробовать еще раз")])})),T={};c("1f04");T.render=N,T.__scopeId="data-v-a82d7cd4";var U=T,q={name:"App",computed:{products:function(){return this.$store.state.products},productsLoading:function(){return this.$store.state.isLoading},productsLoadingFailed:function(){return this.$store.state.isLoadingErr}},components:{productList:y,baseLoader:E,baseErrorLoad:U},methods:{loadApartments:function(){this.$store.dispatch("loadProducts")}},created:function(){this.loadApartments()}};c("2e06");q.render=o;var D=q,J=c("5530"),z=(c("7db0"),c("5502")),B=c("bc3a"),G=c.n(B),H=Object(z["a"])({state:{products:null,isLoading:!1,isLoadingErr:!1},mutations:{updateIsLoading:function(t,e){t.isLoading=e}},actions:{loadProducts:function(t){var e=this;t.commit("updateIsLoading",!0),G.a.get("http://localhost:3000/api/apartments/").then((function(t){e.state.products=t.data})).catch((function(){e.state.isLoadingErr=!0})).then((function(){return t.commit("updateIsLoading",!1)}))},addLike:function(t,e){var c=this;t.commit("updateIsLoading",!0);var a=e.productId,n=e.likeCount,i=this.state.products.find((function(t){return t.id===a}));G.a.put("http://localhost:3000/api/apartments/".concat(a),Object(J["a"])(Object(J["a"])({},i),{},{likeCount:n})).then((function(t){i.likeCount=t.data.likeCount})).catch((function(){c.state.isLoadingErr=!0})).then((function(){return t.commit("updateIsLoading",!1)}))}}});Object(a["b"])(D).use(H).mount("#app")},"7b0d":function(t,e,c){},"7c76":function(t,e,c){"use strict";c("a5f4")},"8d2f":function(t,e,c){"use strict";c("f42f")},9721:function(t,e,c){"use strict";c("7b0d")},a5f4:function(t,e,c){},bb6e:function(t,e,c){var a={"./apartment.jpg":"243b","./like.png":"ef74"};function n(t){var e=i(t);return c(e)}function i(t){if(!c.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}n.keys=function(){return Object.keys(a)},n.resolve=i,t.exports=n,n.id="bb6e"},ef74:function(t,e,c){t.exports=c.p+"img/like.313656d4.png"},f42f:function(t,e,c){},f6a8:function(t,e,c){}});
//# sourceMappingURL=app.6ec86ac8.js.map